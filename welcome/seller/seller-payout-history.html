<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seller Earnings â€” Local Basket</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="seller-dashboard.css">
  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/welcome/logo2.png?v=99">
  <link rel="icon" type="image/png" sizes="32x32" href="/welcome/logo2.png?v=200">
<link rel="icon" type="image/png" sizes="48x48" href="/welcome/logo2.png?v=200">
<link rel="icon" type="image/png" sizes="96x96" href="/welcome/logo2.png?v=200">
<link rel="apple-touch-icon" sizes="180x180" href="/welcome/logo2.png?v=200">

  <style>
    :root {
        --lav: #ff8a1a;
        --lav-soft: rgba(255, 138, 26, 0.14);
        --card: #ffffff;
        --bg: #f8f9fa;
        --text-main: #2d3436;
        --text-light: #636e72;
        --border-color: #eee;
    }

    /* === Sidebar Mobile Hover/Touch Effects === */
    .nav-link {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 20px;
        margin: 5px 15px;
        border-radius: 12px;
        color: rgba(255, 255, 255, 0.7);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
    }

    @media (hover: hover) {
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            transform: translateX(8px);
        }
    }

    .nav-link:active {
        background: rgba(255, 255, 255, 0.2);
        transform: scale(0.95);
        color: #fff;
    }

    .nav-link.active {
        background: #fff !important;
        color: var(--lav) !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    /* === Period Switcher Styling === */
    .period-pill {
        display: flex;
        background: var(--bg);
        padding: 4px;
        border-radius: 10px;
        gap: 4px;
        border: 1px solid var(--border-color);
    }
    .period-pill button {
        border: none;
        padding: 6px 15px;
        border-radius: 8px;
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: 0.3s;
        color: var(--text-light);
        background: transparent;
    }
    .period-pill button.active {
        background: var(--lav);
        color: white;
    }

    /* === Withdrawal Modal Design (No UI Disturbance) === */
    .modal-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.6); display: none; align-items: center;
        justify-content: center; z-index: 9999; padding: 20px;
        backdrop-filter: blur(4px);
    }
    .modal-box {
        background: var(--card); width: 100%; max-width: 400px;
        padding: 30px; border-radius: 20px; text-align: center;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        position: relative; animation: modalPop 0.3s ease-out;
    }
    @keyframes modalPop { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    
    .modal-box input {
        width: 100%; padding: 12px; margin: 10px 0;
        border: 1px solid var(--border-color); border-radius: 10px; outline: none;
    }
    .btn-modal {
        width: 100%; padding: 14px; background: var(--lav);
        color: white; border: none; border-radius: 12px;
        font-weight: 700; cursor: pointer; margin-top: 10px;
    }

    /* === Layout & Elements === */
    /* moved to shared CSS */

    .btn-withdraw {
        width: 100%;
        background: linear-gradient(135deg, var(--lav), #ffb347);
        color: white;
        border: none;
        padding: 16px;
        border-radius: 14px;
        font-size: 15px;
        font-weight: 700;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(255, 138, 26, 0.3);
        transition: 0.3s;
    }
    .btn-withdraw:active { transform: scale(0.97); }

    .close-sidebar {
        display: none;
        position: absolute;
        right: 15px;
        top: 15px;
        width: 35px;
        height: 35px;
        background: rgba(255,255,255,0.15);
        color: white;
        border-radius: 50%;
        align-items: center;
        justify-content: center;
        cursor: pointer;
    }

    .earnings-grid { display: grid; grid-template-columns: 1.5fr 1fr; gap: 20px; margin-top: 15px; }
    .chart-container { background: var(--card); padding: 20px; border-radius: 20px; border: 1px solid var(--border-color); min-height: 400px; }

    @media (max-width: 900px) {
        .earnings-grid { grid-template-columns: 1fr; }
        .close-sidebar { display: flex; }
    }
  </style>
</head>
<body>

<header class="mobile-header">
  <button id="menuBtn"><i class="fas fa-bars"></i></button>
  <span class="logo-text-mobile">My Pocket</span>
</header>

<div id="sidebarOverlay"></div>

<aside class="sidebar" id="sidebar">
  <div class="close-sidebar" id="closeSidebar"><i class="fas fa-times"></i></div>
  <div class="brand">
    <img src="/welcome/logo2.png">
    <h3>Local Basket</h3>
    <p>Seller Panel</p>
  </div>
  <nav class="nav-menu">
    <ul>
      <li><a href="seller-dashboard.html" class="nav-link"><i class="fas fa-chart-line"></i> Dashboard</a></li>
      <li><a href="seller-pocket.html" class="nav-link active"><i class="fas fa-wallet"></i> My Pocket</a></li>
      <li><a href="seller-add-product.html" class="nav-link"><i class="fas fa-plus-circle"></i> Add Product</a></li>
      <li><a href="seller-products.html" class="nav-link"><i class="fas fa-boxes-stacked"></i> My Products</a></li>
      <li><a href="seller-orders.html" class="nav-link"><i class="fas fa-receipt"></i> All Orders</a></li>
      <li><a href="seller-profile.html" class="nav-link"><i class="fas fa-store"></i> Shop Profile</a></li>
      <li class="logout-item"><button onclick="logout()" class="btn-logout"><i class="fas fa-sign-out-alt"></i> Logout</button></li>
    </ul>
  </nav>
</aside>

<main class="main">
  <button class="sidebar-open-btn" onclick="sidebar.classList.add('open'); sidebarOverlay.style.display='block';">
    <i class="fas fa-bars"></i> Menu
  </button>

  <div class="top-bar">
    <div class="shop-info">
      <div class="text-info">
        <h3 style="color: var(--lav); font-weight: 700; margin:0;">ðŸ’° My Pocket</h3>
        <p style="font-size: 12px; color: var(--text-light); margin:0;">Real-time earnings data</p>
      </div>
    </div>
    <div class="toggles">
        <div class="period-pill">
            <button id="dayBtn" class="active" onclick="changePeriod('day')">Day</button>
            <button id="weekBtn" onclick="changePeriod('week')">Week</button>
            <button id="monthBtn" onclick="changePeriod('month')">Month</button>
        </div>
    </div>
  </div>

  <section class="dashboard-boxes" style="margin-top: 16px;">
    <div class="box">
      <div class="box-icon" style="background: rgba(255, 138, 26, 0.14); color: var(--lav);">
        <i class="fas fa-sun"></i>
      </div>
      <div class="box-data">
        <h4>Today Earnings</h4>
        <b id="todayTotal">Rs. 0</b>
      </div>
    </div>
    <div class="box">
      <div class="box-icon" style="background: rgba(255, 138, 26, 0.14); color: var(--lav);">
        <i class="fas fa-calendar-week"></i>
      </div>
      <div class="box-data">
        <h4>Weekly Earnings</h4>
        <b id="weekTotal">Rs. 0</b>
      </div>
    </div>
    <div class="box">
      <div class="box-icon" style="background: rgba(255, 138, 26, 0.14); color: var(--lav);">
        <i class="fas fa-calendar-alt"></i>
      </div>
      <div class="box-data">
        <h4>Monthly Earnings</h4>
        <b id="monthTotal">Rs. 0</b>
      </div>
    </div>
  </section>

  <div class="earnings-grid">
    <div class="chart-container">
      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h4 id="chartTitle" style="margin:0; font-size: 15px;">Revenue (Today)</h4>
        <small id="lastUpdated" style="color:var(--text-light); font-size:11px;"></small>
      </div>
      <div style="height: 300px;">
        <canvas id="earnChart"></canvas>
      </div>
    </div>

    <div class="summary-card" style="background: var(--card); padding: 25px; border-radius: 20px; border: 1px solid var(--border-color); display: flex; flex-direction: column; justify-content: space-between;">
      <div>
        <small style="color:var(--text-light); font-weight:600; text-transform:uppercase; font-size:11px; letter-spacing:1px;">Available Balance</small>
        <div class="earn-value" id="totalEarnAmount" style="font-size: 36px; font-weight: 800; color: var(--lav); margin: 10px 0;">Rs. 0.00</div>
        <div style="margin-top:6px; color: var(--text-light); font-size: 12px;">Payout statement every Monday</div>
      </div>

      <div style="margin: 20px 0;">
        <div style="display: flex; align-items: center; gap: 15px; background: var(--bg); padding: 15px; border-radius: 15px; margin-bottom: 10px;">
          <i class="fas fa-check-circle" style="color: #00b894; font-size: 20px;"></i>
          <div>
            <div style="font-weight:700; font-size:16px;" id="statOrders">0</div>
            <small style="color:var(--text-light)">Total Delivered</small>
          </div>
        </div>
        <div style="display: flex; align-items: center; gap: 15px; background: var(--bg); padding: 15px; border-radius: 15px;">
          <i class="fas fa-calendar-day" style="color: var(--lav); font-size: 20px;"></i>
          <div>
            <div style="font-weight:700; font-size:16px;" id="nextPayoutLabel">--</div>
            <small style="color:var(--text-light)">Next Payout Statement</small>
          </div>
        </div>
      </div>

      <button class="btn-withdraw" onclick="openWithdrawModal()">
        <i class="fas fa-paper-plane"></i> WITHDRAW MONEY
      </button>
    </div>
  </div>

  <section class="orders-panel" style="margin-top: 20px;">
    <div style="background: var(--card); padding: 20px; border-radius: 20px; border: 1px solid var(--border-color);">
      <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom: 12px;">
        <h4 style="margin:0;">Weekly Statement History</h4>
        <small style="color: var(--text-light);" id="weeklyRangeHint">Payout on Monday</small>
      </div>
      <div id="weeklyStatementList" style="display:grid; gap: 10px;"></div>
    </div>
  </section>
</main>

<div class="modal-overlay" id="withdrawModal">
    <div class="modal-box">
        <span onclick="closeModal()" style="position:absolute; right:20px; top:15px; cursor:pointer; font-size:24px;">&times;</span>
        
        <div id="stepBank">
            <i class="fas fa-university" style="font-size:40px; color:var(--lav); margin-bottom:15px;"></i>
            <h3>Bank Details</h3>
            <p style="font-size:12px; color:var(--text-light);">Bank account not found. Please add below:</p>
            <input type="text" id="accNo" placeholder="Account Number">
            <input type="text" id="ifsc" placeholder="IFSC Code">
            <button class="btn-modal" onclick="saveBank()">Save & Continue</button>
        </div>

        <div id="stepAmount" style="display:none;">
            <h3>Withdraw Amount</h3>
            <p style="font-size:12px; color:var(--text-light);">Transfer to your bank account.</p>
            <input type="number" id="withdrawInput" placeholder="Enter amount">
            <button class="btn-modal" onclick="confirmWithdraw()">Withdraw Now</button>
        </div>

        <div id="stepSuccess" style="display:none;">
            <i class="fas fa-check-circle" style="font-size:50px; color:#00b894; margin-bottom:15px;"></i>
            <h3>Success!</h3>
            <p style="color:var(--text-light);">Your money will be credited within 24 hours.</p>
            <button class="btn-modal" onclick="closeModal()">Close</button>
        </div>
    </div>
</div>

<script>
/* ================= AUTH CHECK ================= */
const seller = JSON.parse(localStorage.getItem("lbSeller"));
if (!seller || !seller.id) {
  location.href = "./seller-auth/seller-auth.html";
}

/* ================= CONFIG ================= */
const API_URL = `http://localhost:5000/api/seller/orders/${seller.id}`;
const GLOBAL_COMMISSION_STORAGE_KEY = "lbGlobalCommission";
const SELLER_COMMISSION_MAP_KEY = "lbSellerCommissionMap";
const ADMIN_API_BASE_CANDIDATES = [
  "http://localhost:5000/api/admin",
  "http://127.0.0.1:5000/api/admin"
];

/* ================= STATE ================= */
let chartInstance = null;
let currentPeriod = "day";
let allOrders = [];
let pocketBalance = 0;
let isBankAdded = false;
let runtimeCommissionPercent = null;

const clampPercent = v => Math.min(100, Math.max(0, Number(v) || 0));
const normalizePercent = v => {
  const n = Number(v);
  if (!Number.isFinite(n) || n < 0 || n > 100) return null;
  return clampPercent(n);
};

function readGlobalCommissionPercent() {
  try {
    const raw = localStorage.getItem(GLOBAL_COMMISSION_STORAGE_KEY);
    if (!raw) return null;
    const cfg = JSON.parse(raw);
    if (cfg?.enabled === false) return 0;
    return normalizePercent(cfg?.percent);
  } catch {
    return null;
  }
}

function readMappedSellerCommissionPercent() {
  try {
    const raw = localStorage.getItem(SELLER_COMMISSION_MAP_KEY);
    if (!raw) return null;
    const map = JSON.parse(raw);
    return normalizePercent(map?.[String(Number(seller.id))]);
  } catch {
    return null;
  }
}

function getEffectiveCommissionRate() {
  const pct = (
    runtimeCommissionPercent ??
    readMappedSellerCommissionPercent() ??
    readGlobalCommissionPercent() ??
    normalizePercent(seller?.commission) ??
    10
  );
  return pct / 100;
}

async function fetchSellerCommissionFromAdminApi() {
  const id = Number(seller.id);
  if (!Number.isFinite(id)) return null;

  for (const base of ADMIN_API_BASE_CANDIDATES) {
    try {
      const res = await fetch(`${base}/sellers`);
      const data = await res.json().catch(() => ({}));
      const list = Array.isArray(data?.sellers) ? data.sellers : [];
      const found = list.find(s => Number(s?.id) === id);
      const pct = normalizePercent(found?.commission);
      if (pct !== null) return pct;
    } catch {}
  }
  return null;
}

function calculateSellerEarning(order) {
  const total = Number(order?.total_amount || 0);
  if (!Number.isFinite(total) || total <= 0) return 0;
  const COMMISSION_RATE = getEffectiveCommissionRate();
  const commission = total * COMMISSION_RATE;
  return Math.max(total - commission, 0);
}

function normalizeStatus(status) {
  return String(status || "").toUpperCase();
}

function getOrderDate(order) {
  return (
    order?.created_at ||
    order?.createdAt ||
    order?.updated_at ||
    order?.updatedAt ||
    order?.delivered_at ||
    order?.deliveredAt ||
    null
  );
}

function getOrderDateObj(order) {
  const raw = getOrderDate(order);
  if (!raw) return null;
  const d = new Date(raw);
  return isNaN(d) ? null : d;
}

function formatMoney(v) {
  return `Rs. ${Number(v || 0).toLocaleString("en-IN")}`;
}

function getStartOfToday(d = new Date()) {
  return new Date(d.getFullYear(), d.getMonth(), d.getDate());
}

function getStartOfWeek(d = new Date()) {
  const day = (d.getDay() + 6) % 7; // Monday = 0 ... Sunday = 6
  return new Date(d.getFullYear(), d.getMonth(), d.getDate() - day);
}

function getStartOfMonth(d = new Date()) {
  return new Date(d.getFullYear(), d.getMonth(), 1);
}

function getNextMondayLabel() {
  const now = new Date();
  const day = now.getDay();
  const daysToMonday = (8 - day) % 7 || 7;
  const next = new Date(now.getFullYear(), now.getMonth(), now.getDate() + daysToMonday);
  return next.toLocaleDateString("en-IN", { weekday: "short", day: "2-digit", month: "short" });
}

/* ================= LOAD WALLET DATA ================= */
async function loadWalletData() {
  try {
    runtimeCommissionPercent = await fetchSellerCommissionFromAdminApi();
    const res = await fetch(API_URL);
    const data = await res.json();

    if (!data || !data.success || !Array.isArray(data.orders)) {
      console.warn("Invalid wallet payload", data);
      return;
    }

    allOrders = data.orders;

    /* ONLY DELIVERED */
    const deliveredStatuses = new Set(["DELIVERED", "COMPLETED", "SUCCESS", "DELIVERED_BY_RIDER"]);
    const delivered = allOrders.filter(o => deliveredStatuses.has(normalizeStatus(o.status)));

    const now = new Date();
    const startOfToday = getStartOfToday(now);
    const startOfWeek = getStartOfWeek(now);
    const startOfMonth = getStartOfMonth(now);

    const totalEarning = delivered.reduce((s, o) => s + calculateSellerEarning(o), 0);

    const dailyEarning = delivered
      .filter(o => {
        const d = getOrderDateObj(o);
        return d && d >= startOfToday;
      })
      .reduce((s, o) => s + calculateSellerEarning(o), 0);

    const weeklyEarning = delivered
      .filter(o => {
        const d = getOrderDateObj(o);
        return d && d >= startOfWeek;
      })
      .reduce((s, o) => s + calculateSellerEarning(o), 0);

    const monthlyEarning = delivered
      .filter(o => {
        const d = getOrderDateObj(o);
        return d && d >= startOfMonth;
      })
      .reduce((s, o) => s + calculateSellerEarning(o), 0);

    pocketBalance = totalEarning;

    /* MAIN BALANCE */
    document.getElementById("totalEarnAmount").innerText =
      formatMoney(totalEarning);

    document.getElementById("statOrders").innerText =
      delivered.length;

    document.getElementById("lastUpdated").innerText =
      "Updated: " + new Date().toLocaleTimeString();

    document.getElementById("todayTotal").innerText = formatMoney(dailyEarning);
    document.getElementById("weekTotal").innerText = formatMoney(weeklyEarning);
    document.getElementById("monthTotal").innerText = formatMoney(monthlyEarning);

    const nextPayout = document.getElementById("nextPayoutLabel");
    if (nextPayout) nextPayout.innerText = getNextMondayLabel();

    updateChart();
    renderWeeklyStatements(delivered);

  } catch (err) {
    console.error("Wallet Load Error:", err);
  }
}

/* ================= PERIOD SWITCH ================= */
function changePeriod(p) {
  currentPeriod = p;

  document.getElementById("dayBtn").classList.toggle("active", p === "day");
  document.getElementById("weekBtn").classList.toggle("active", p === "week");
  document.getElementById("monthBtn").classList.toggle("active", p === "month");

  document.getElementById("chartTitle").innerText =
    p === "day" ? "Revenue (Today)" : p === "week" ? "Revenue (Last 7 Days)" : "Revenue (This Month)";

  updateChart();
}

/* ================= CHART LOGIC ================= */
function updateChart() {
  const deliveredStatuses = new Set(["DELIVERED", "COMPLETED", "SUCCESS", "DELIVERED_BY_RIDER"]);
  const delivered = allOrders.filter(o => deliveredStatuses.has(normalizeStatus(o.status)));

  const labels = [];
  const values = [];
  const now = new Date();

  if (currentPeriod === "day") {
    for (let h = 0; h < 24; h++) {
      const from = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h, 0, 0);
      const to = new Date(now.getFullYear(), now.getMonth(), now.getDate(), h + 1, 0, 0);
      labels.push(`${String(h).padStart(2, "0")}:00`);
      const total = delivered
        .filter(o => {
          const d = getOrderDateObj(o);
          return d && d >= from && d < to;
        })
        .reduce((s, o) => s + calculateSellerEarning(o), 0);
      values.push(total);
    }
  } else if (currentPeriod === "week") {
    /* LAST 7 DAYS */
    for (let i = 6; i >= 0; i--) {
      const d = new Date();
      d.setDate(now.getDate() - i);
      const key = d.toISOString().slice(0, 10);

      labels.push(d.toLocaleDateString("en-US", { weekday: "short" }));

      const total = delivered
        .filter(o => {
          const d = getOrderDateObj(o);
          return d && d.toISOString().slice(0, 10) === key;
        })
        .reduce((s, o) => s + calculateSellerEarning(o), 0);

      values.push(total);
    }
  } else {
    /* CURRENT MONTH (1 â†’ today) */
    const year = now.getFullYear();
    const month = now.getMonth();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    for (let day = 1; day <= daysInMonth; day++) {
      const d = new Date(year, month, day);
      if (d > now) break;

      const key = d.toISOString().slice(0, 10);
      labels.push(day);

      const total = delivered
        .filter(o => {
          const d = getOrderDateObj(o);
          return d && d.toISOString().slice(0, 10) === key;
        })
        .reduce((s, o) => s + calculateSellerEarning(o), 0);

      values.push(total);
    }
  }

  const ctx = document.getElementById("earnChart").getContext("2d");
  if (chartInstance) chartInstance.destroy();

  chartInstance = new Chart(ctx, {
    type: "line",
    data: {
      labels,
      datasets: [{
        data: values,
        borderColor: "#ff8a1a",
        backgroundColor: "rgba(255, 138, 26, 0.12)",
        fill: true,
        tension: 0.4
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: { legend: { display: false } },
      scales: {
        y: {
          ticks: {
            callback: v => `Rs. ${v}`
          }
        }
      }
    }
  });
}

/* ================= WEEKLY STATEMENTS ================= */
function renderWeeklyStatements(delivered) {
  const list = document.getElementById("weeklyStatementList");
  if (!list) return;
  const byWeek = new Map();

  delivered.forEach(order => {
    if (!order.created_at) return;
    const d = new Date(order.created_at);
    if (isNaN(d)) return;
    const start = getStartOfWeek(d);
    const key = start.toISOString().slice(0, 10);
    const current = byWeek.get(key) || 0;
    byWeek.set(key, current + calculateSellerEarning(order));
  });

  const weeks = Array.from(byWeek.entries())
    .map(([key, total]) => {
      const start = new Date(key);
      const end = new Date(start);
      end.setDate(start.getDate() + 7);
      return { key, total, start, end };
    })
    .sort((a, b) => b.start - a.start)
    .slice(0, 8);

  if (!weeks.length) {
    list.innerHTML = `<div style="text-align:center; color: var(--text-light); padding: 16px;">No weekly statements yet.</div>`;
    return;
  }

  list.innerHTML = weeks.map(w => `
    <div style="display:flex; align-items:center; justify-content:space-between; padding: 12px 14px; border: 1px solid var(--border-color); border-radius: 12px; background: var(--bg);">
      <div>
        <div style="font-weight:700;">${w.start.toLocaleDateString("en-IN", { day: "2-digit", month: "short" })} - ${w.end.toLocaleDateString("en-IN", { day: "2-digit", month: "short" })}</div>
        <div style="font-size:12px; color: var(--text-light);">Weekly Statement</div>
      </div>
      <div style="font-weight:800; color: var(--lav);">${formatMoney(w.total)}</div>
    </div>
  `).join("");
}

/* ================= WITHDRAW MODAL ================= */
function openWithdrawModal() {
  withdrawModal.style.display = "flex";
  stepBank.style.display = isBankAdded ? "none" : "block";
  stepAmount.style.display = isBankAdded ? "block" : "none";
  stepSuccess.style.display = "none";
}

function saveBank() {
  if (accNo.value && ifsc.value) {
    isBankAdded = true;
    stepBank.style.display = "none";
    stepAmount.style.display = "block";
  } else {
    alert("Please fill all bank details");
  }
}

function confirmWithdraw() {
  const amt = Number(withdrawInput.value);
  if (amt > 0 && amt <= pocketBalance) {
    if (confirm(`Confirm withdrawal of Rs. ${amt}?`)) {
      stepAmount.style.display = "none";
      stepSuccess.style.display = "block";
    }
  } else {
    alert("Invalid amount or insufficient balance");
  }
}

function closeModal() {
  withdrawModal.style.display = "none";
}

/* ================= SIDEBAR ================= */
menuBtn.onclick = () => {
  sidebar.classList.add("open");
  sidebarOverlay.style.display = "block";
};
closeSidebar.onclick = sidebarOverlay.onclick = () => {
  sidebar.classList.remove("open");
  sidebarOverlay.style.display = "none";
};

/* ================= LOGOUT ================= */
function logout() {
  if (confirm("Logout?")) {
    localStorage.removeItem("lbSeller");
    location.href = "./seller-auth/seller-auth.html";
  }
}

/* ================= INIT ================= */
loadWalletData();
</script>



</body>
</html>






